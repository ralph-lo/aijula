!("getComputedStyle"in this)&&(this.getComputedStyle=function(){function t(e,n,r,i){var o,u=n[r],l=parseFloat(u),p=u.split(/\d/)[0];return i=null!=i?i:/%|em/.test(p)&&e.parentElement?t(e.parentElement,e.parentElement.currentStyle,"fontSize",null):16,o="fontSize"==r?i:/width/i.test(r)?e.clientWidth:e.clientHeight,"em"==p?l*i:"in"==p?96*l:"pt"==p?96*l/72:"%"==p?l/100*o:l}function e(t,e){var n="border"==e?"Width":"",r=e+"Top"+n,i=e+"Right"+n,o=e+"Bottom"+n,u=e+"Left"+n;t[e]=(t[r]==t[i]==t[o]==t[u]?[t[r]]:t[r]==t[o]&&t[u]==t[i]?[t[r],t[i]]:t[u]==t[i]?[t[r],t[i],t[o]]:[t[r],t[i],t[o],t[u]]).join(" ")}function n(n){var r=n.currentStyle,i=this,o=t(n,r,"fontSize",null);for(var u in r)/width|height|margin.|padding.|border.+W/.test(u)&&"auto"!==i[u]?i[u]=t(n,r,u,o)+"px":"styleFloat"===u?i["float"]=r[u]:i[u]=r[u];return e(i,"margin"),e(i,"padding"),e(i,"border"),i.fontSize=o+"px",i}function r(t){return new n(t)}return n.prototype={constructor:n,getPropertyPriority:function(){},getPropertyValue:function(t){return this[t]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},r}());!function(t,n,e){n[t]=n[t]||e(),"undefined"!=typeof module&&module.exports?module.exports=n[t]:"function"==typeof define&&define.amd&&define(function(){return n[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function t(t,n){l.add(t,n),h||(h=y(l.drain))}function n(t){var n,e=typeof t;return null==t||"object"!=e&&"function"!=e||(n=t.then),"function"==typeof n&&n}function e(){for(var t=0;t<this.chain.length;t++)o(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function o(t,e,o){var r,i;try{!1===e?o.reject(t.msg):(r=!0===e?t.msg:e.call(void 0,t.msg),r===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=n(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(c){o.reject(c)}}function r(o){var c,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(c=n(o))?t(function(){var t=new f(u);try{c.call(o,function(){r.apply(t,arguments)},function(){i.apply(t,arguments)})}catch(n){i.call(t,n)}}):(u.msg=o,u.state=1,u.chain.length>0&&t(e,u))}catch(a){i.call(new f(u),a)}}}function i(n){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=n,o.state=2,o.chain.length>0&&t(e,o))}function c(t,n,e,o){for(var r=0;r<n.length;r++)!function(r){t.resolve(n[r]).then(function(t){e(r,t)},o)}(r)}function f(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function a(n){if("function"!=typeof n)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new u(this);this.then=function(n,r){var i={success:"function"!=typeof n||n,failure:"function"==typeof r&&r};return i.promise=new this.constructor(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");i.resolve=t,i.reject=n}),o.chain.push(i),0!==o.state&&t(e,o),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{n.call(void 0,function(t){r.call(o,t)},function(t){i.call(o,t)})}catch(c){i.call(o,c)}}var s,h,l,p=Object.prototype.toString,y="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),s=function(t,n,e,o){return Object.defineProperty(t,n,{value:e,writable:!0,configurable:!1!==o})}}catch(v){s=function(t,n,e){return t[n]=e,t}}l=function(){function t(t,n){this.fn=t,this.self=n,this.next=void 0}var n,e,o;return{add:function(r,i){o=new t(r,i),e?e.next=o:n=o,e=o,o=void 0},drain:function(){var t=n;for(n=e=h=void 0;t;)t.fn.call(t.self),t=t.next}}}();var d=s({},"constructor",a,!1);return a.prototype=d,s(d,"__NPO__",0,!1),s(a,"resolve",function(t){var n=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new n(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");n(t)})}),s(a,"reject",function(t){return new this(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");e(t)})}),s(a,"all",function(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):0===t.length?n.resolve([]):new n(function(e,o){if("function"!=typeof e||"function"!=typeof o)throw TypeError("Not a function");var r=t.length,i=Array(r),f=0;c(n,t,function(t,n){i[t]=n,++f===r&&e(i)},o)})}),s(a,"race",function(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):new n(function(e,o){if("function"!=typeof e||"function"!=typeof o)throw TypeError("Not a function");c(n,t,function(t,n){e(n)},o)})}),a});!function(){function r(r,t){if(void 0===this||null===this)throw new TypeError;if("function"!=typeof r)throw new TypeError(r+" must be a function");return t||(t=this),t}Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),o=e.length>>>0;if(0===o)return-1;var i=+t||0;if(Math.abs(i)===Infinity&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);n<o;){if(n in e&&e[n]===r)return n;n++}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(r){"use strict";if(void 0===this||null===this)throw new TypeError;var t,n,e=Object(this),o=e.length>>>0;if(0===o)return-1;for(t=o-1,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),n=t>=0?Math.min(t,o-1):o-Math.abs(t);n>=0;n--)if(n in e&&e[n]===r)return n;return-1}),Array.prototype.every||(Array.prototype.every=function(r){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof r)throw new TypeError;for(var e=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t&&!r.call(e,t[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(r){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof r)throw new TypeError;for(var e=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t&&r.call(e,t[o],o,t))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(r,t){var n,e;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof r)throw new TypeError(r+" is not a function");for(arguments.length>1&&(n=t),e=0;e<i;){var a;e in o&&(a=o[e],r.call(n,a,e,o)),e++}}),Array.prototype.map||(Array.prototype.map=function(r,t){var n,e,o;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("[object Function]"!={}.toString.call(r))throw new TypeError(r+" is not a function");for(t&&(n=t),e=new Array(a),o=0;o<a;){var h,f;o in i&&(h=i[o],f=r.call(n,h,o,i),e[o]=f),o++}return e}),Array.prototype.filter||(Array.prototype.filter=function(r){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof r)throw new TypeError;for(var e=[],o=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)if(i in t){var a=t[i];r.call(o,a,i,t)&&e.push(a)}return e}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(r,t){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof r)throw new TypeError(r+" is not a function");var n,e,o=this.length>>>0,i=!1;for(arguments.length>1&&(e=t,i=!0),n=0;o>n;++n)this.hasOwnProperty(n)&&(i?e=r(e,this[n],n,this):(e=this[n],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return e}),"function"!=typeof Array.prototype.reduceRight&&(Array.prototype.reduceRight=function(r){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof r)throw new TypeError(r+" is not a function");var t,n=Object(this),e=n.length>>>0,o=e-1;if(arguments.length>=2)t=arguments[1];else{for(;o>=0&&!(o in n);)o--;if(o<0)throw new TypeError("Reduce of empty array with no initial value");t=n[o--]}for(;o>=0;o--)o in n&&(t=r(t,n[o],o,n));return t}),Array.from||(Array.from=function(r,t,n){function e(r){return"function"==typeof r||"[Object Function]"===Object.prototype.toString.call(r)}var o=Math.pow(2,53)-1;if(null==r)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i=Object(r);e(t)&&!n&&(n=this);for(var a=0,h=function(r){var t=+r?+r:0;return Math.min(Math.max(t,0),o)}(i.length),f=[];a<h;a++)f.push(e(t)?t.call(n,i[a],a):i[a]);return f}),Array.of||(Array.of=function(){return Array.prototype.slice.call(arguments)}),Array.prototype.copyWithin||(Array.prototype.copyWithin=function(r,t,n){var e=this.length;if(0==e||0==arguments.length)return this;if(!+r&&0!=+r)throw new TypeError;if(r=+r,r=r<0?Math.max(e+r,0):Math.min(r,e),1==arguments.length)t=0,n=e;else if(2==arguments.length){if((t=+t?+t:0)>=e)return this;n=e}else n=+n?+n:e;if(t=t<0?Math.max(e+t,0):t,n=n<0?Math.max(e+n,0):Math.min(n,e),t>=n)return this;for(var o=0,i=Math.min(e-r,n-t),a=Array.prototype.slice.call(this,0);o<i;o++)t in this&&(this[o+r]=a[t++]);return this}),Array.prototype.fill||(Array.prototype.fill=function(r,t,n){if(null==this)throw new TypeError;var e=this.length;if(!e||e<=0)return this;arguments.length<=1&&(t=0,n=e),t=+t?+t:0,t=t<0?Math.max(e+t,0):Math.min(e,t),n=+n?+n:0,n=n<0?Math.max(e+n,0):Math.min(e,n);for(var o=t;o<n;o++)this[o]=r;return this}),Array.prototype.find||(Array.prototype.find=function(t,n){var e=0,o=this.length;for(n=r(t,n);e<o;e++)if(t.call(n,this[e],e,this))return this[e]}),Array.prototype.findIndex||(Array.prototype.findIndex=function(t,n){var e=0,o=this.length;for(n=r(t,n);e<o;e++)if(t.call(n,this[e],e,this))return e;return-1}),Array.prototype.includes||(Array.prototype.includes=function(r,t){if(null==this)throw new TypeError;var n=Object(this),e=+n.length;if(!e&&0!=e)throw new TypeError;t=+t?+t:0,t=t<0?Math.max(e+t,0):t>e?0:t;var o=!1;"number"==typeof r&&"NaN"===r.toString()&&(o=!0);for(var i=t;i<e;i++)if(i in n){if("number"==typeof n[i]&&"NaN"===r.toString()&&o)return!0;if(n[i]===r)return!0}return!1})}();(function(e){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();if(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}),String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(this==null)throw new TypeError("can't convert "+this+" to object");var t=""+this;e=+e,e!=e&&(e=0);if(e<0)throw new RangeError("repeat count must be non-negative");if(e==Infinity)throw new RangeError("repeat count must be less than infinity");e=Math.floor(e);if(t.length==0||e==0)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var n="";for(;;){(e&1)==1&&(n+=t),e>>>=1;if(e==0)break;t+=t}return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})})(this);Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e||window,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i});!function(t,e){"use strict";function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||a(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;this.intersectionRatio=n?i/n:this.isIntersecting?1:0}function o(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=r(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(){return t.performance&&performance.now&&performance.now()}function r(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function s(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function h(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function c(t,e){var n=Math.max(t.top,e.top),o=Math.min(t.bottom,e.bottom),i=Math.max(t.left,e.left),r=Math.min(t.right,e.right),s=r-i,h=o-n;return s>=0&&h>=0&&{top:n,bottom:o,left:i,right:r,width:s,height:h}}function u(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):a()}function a(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t,e){for(var n=e;n;){if(n==t)return!0;n=p(n)}return!1}function p(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)return void("isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var f=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},o.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},o.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,h(t,"resize",this._checkForIntersections,!0),h(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():a();this._observationTargets.forEach(function(o){var r=o.element,s=u(r),h=this._rootContainsTarget(r),c=o.entry,a=t&&h&&this._computeTargetAndRootIntersection(r,e),l=o.entry=new n({time:i(),target:r,boundingClientRect:s,rootBounds:e,intersectionRect:a});c?t&&h?this._hasCrossedThreshold(c,l)&&this._queuedEntries.push(l):c&&c.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,o){if("none"!=t.getComputedStyle(n).display){for(var i=u(n),r=i,s=p(n),h=!1;!h;){var a=null,l=1==s.nodeType?t.getComputedStyle(s):{};if("none"==l.display)return;if(s==this.root||s==e?(h=!0,a=o):s!=e.body&&s!=e.documentElement&&"visible"!=l.overflow&&(a=u(s)),a&&!(r=c(a,r)))break;s=p(s)}return r}},o.prototype._getRootRect=function(){var t;if(this.root)t=u(this.root);else{var n=e.documentElement,o=e.body;t={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},o.prototype._rootIsInDom=function(){return!this.root||l(e,this.root)},o.prototype._rootContainsTarget=function(t){return l(this.root||e,t)},o.prototype._registerInstance=function(){f.indexOf(this)<0&&f.push(this)},o.prototype._unregisterInstance=function(){var t=f.indexOf(this);-1!=t&&f.splice(t,1)},t.IntersectionObserver=o,t.IntersectionObserverEntry=n}(window,document);(function(){"use strict";function s(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return e[n];return undefined}function o(e){return Object.prototype.toString.call(e)=="[object Array]"}function u(e,t){var n=[];return a(e,function(e){n.push(t(e))}),n}function a(e,n){if(o(e)){for(var r=0;r<e.length;r++)if(n(e[r])===!1)return}else for(var i in e)if(t.hasOwnProperty(i)&&n(e[i])===!1)return}function f(){return document.scripts[document.scripts.length-1].src.split(/[?#]/)[0]}function l(e){a(e.deps,function(n){var r=t[n].depKeys;s(r,e.key)===undefined&&r.push(e.key)})}function c(e){for(var n=0,r=e.deps;n<r.length;n++){if(!r[n])continue;if(!(r[n]in t))return!1}return!0}function h(e,t,n){o(e)?(n=t,t=e):typeof e=="function"?(n=e,t=[]):typeof t=="function"&&(n=t,t=[]);if(!o(t))throw"dependence must be array";if(typeof e!="string"){var r=f();e=S(r)||E()}return{deps:t,fun:n,key:e}}function p(){var t=e.length,n=null;while(n=e[--t])c(n)&&(d(n),e.splice(t,1),n.type==="define"&&(t=e.length))}function d(e){r(e),e.key in t?(n.log("hotload: "+e.key),i(e)):l(e),t[e.key]=e,t.last=e}function v(t){return t.depKeys=[],c(t)?(d(t),t.type=="define"&&p(),!0):(e.push(t),!1)}function m(e,n,r){if(arguments.length===1&&typeof e=="string"){if(e in t)return t[e].funed;throw e+" not found"}var i=h(e,n,r);i.type="require",v(i)}function g(e,t,n){var r=h(e,t,n);r.type="define",v(r)&&p()}function y(){return{waitingMod:e,readyMod:t}}function b(){e=[],t={},S=E,n.reset(),N()}function w(e,t){var n=document.createElement("script");n.src=e,t&&(n.onreadystatechange=function(){(n.readyState=="loaded"||n.readyState=="complete")&&t()},n.onload=function(){t()}),document.body.appendChild(n)}function x(e){e.log&&n.setConfig(e.log),e.getKey&&(S=e.getKey)}function T(e){t.last.key=e}function N(){g("lego",function(){return{inspect:y,reset:b,load:w,setConfig:x,setLastReadyModuleKey:T}})}var e=[],t={},n=function(){function t(t){t&&t.isShowLog?e=!0:e=!1}function n(t){window.console&&window.console.log&&e&&window.console.log(t)}function r(){e=!1}var e=!1;return{setConfig:t,log:n,reset:r}}(),r=function(){var e={};return function(r){var i=e[r.key]=e[r.key]||{},s=null;if(i.unload)try{s=i.unload()}catch(o){n.log(o)}var a=u(r.deps,function(e){return t[e].funed});r.funed=r.fun.apply(i,a);if(s&&i.load)try{i.load(s)}catch(o){n.log(o)}l(r)}}(),i=function(){function i(e){a(e.depKeys,function(e){s(r,e)===undefined&&r.push(e),i(t[e])})}var r=[];return function(s){s.depKeys=t[s.key].depKeys,delete t[s.key];if(s.type==="require")return;r=[],i(s),n.log("keys will update: "+r.join("\n")),a(r,function(n){var r=t[n];delete t[n],e.push(r)})}}(),E=function(){var e=0;return function(){return"k"+e++}}(),S=E;N(),window.define=g,window.define.amd={},window.require=m})();define("elego.event",function(){function e(e,t){if(this._event&&this._event[e])for(var n=0;n<this._event[e].length;n++)this._event[e][n].call(this,t)}function t(e){for(var t in s)s.hasOwnProperty(t)&&("function"==typeof e&&(e.prototype[t]=s[t]),"object"==typeof e&&(e[t]=s[t]))}function n(e,t,n){if(e)if(t=t.split(","),window.addEventListener)for(var i=0;i<t.length;i++)e.addEventListener(t[i],n,!1);else for(var i=0;i<t.length;i++)e.attachEvent("on"+t[i],function(){var t=window.event;t.target=t.srcElement,t.stopPropagation=function(){t.cancelBubble=!0},t.preventDefault=function(){t.returnValue=!1},n.call(e,t)})}function i(e,t,n){if(t=t.split(","),window.addEventListener)for(var i=0;i<t.length;i++)e.removeEventListener(t[i],n);else for(var i=0;i<t.length;i++)e.detachEvent("on"+t[i],n)}var s={on:function(e,t){"string"==typeof e&&(e=[e]);for(var n=0;n<e.length;n++)this._event=this._event||{},this._event[e[n]]=this._event[e[n]]||[],this._event[e[n]].push(t)},once:function(e,t){this._eventOnce=this._eventOnce||{},this._eventOnce[e]=this._eventOnce[e]||[],!0===this._eventOnce[e].hasEmited?t.call(this,this._eventOnce[e].data):(this._eventOnce[e]=this._eventOnce[e]||[],this._eventOnce[e].push(t))},un:function(e){this._event&&this._event[e]&&delete this._event[e],this._eventOnce&&this._eventOnce[e]&&delete this._eventOnce[e]},emit:function(t,n){e.call(this,t,n)},emitOnce:function(e,t){if(this._eventOnce=this._eventOnce||{},this._eventOnce[e]=this._eventOnce[e]||[],!0===this._eventOnce[e].hasEmited)return!1;this._eventOnce[e].hasEmited=!0,this._eventOnce[e].data=t;for(var n=0;n<this._eventOnce[e].length;n++)this._eventOnce[e][n].call(this,t);return!0}};return t(window.document),{eventable:t,on:n,off:i}});define("elego.format",function(){function e(e,n,r){return e.replace(/#{([^}]+)}/g,function(){if(typeof n=="string")return n;var e=n,i=arguments[1].split(".");for(var s=0;s<i.length;s++){e=e[i[s]];if(e===undefined)return""}return r.isEscape===!0&&(e=t(e)),e})}function t(e){return(new String(e)).replace(/>/g,"&gt;").replace(/</g,"&lt")}return function(t,n,r){var i="",s="",o;r=r||{},typeof r=="function"?o=r:o=r.cb;if(Object.prototype.toString.call(n)=="[object Array]")for(var u=0;u<n.length;u++)o?s=o(u,n[u]):s=n[u],i+=e(t,s,r);else i=e(t,n,r);return i}});define("elego.serverdata",["other.jquery"],function(e){function n(n){if(n===undefined)return o;for(var r=n.split("."),t=o,d=0;d<r.length;d++)if((t=t[r[d]])===undefined)return null;return e.isArray(t)?t=e.extend(!0,[],t):"object"==typeof t&&null!==t&&(t=e.extend(!0,{},t)),t}function r(e){if(e===undefined)return!1;for(var n=e.split("."),r=o||{},t=0;t<n.length;t++)if((r=r[n[t]])===undefined)return!1;return r!==undefined}function t(e,n){if(r(e))return!1;if(e.indexOf(".")>=0)throw new Error("not supported!");return o[e]=n,!0}function d(n,r){r===undefined&&"object"==typeof n?e.extend(o,n):o[n]=r}var i=window.systemserverdata||{},o=window.serverdata||{};for(var u in i.domain)/^\/\//.test(i.domain[u])&&(i.domain[u]=window.location.protocol+i.domain[u]);return o=e.extend(i,o),window.serverdata=null,window.systemserverdata=null,{set:d,get:n,add:t,has:r}});define("elego.viewport",function(){return{get:function(){return window.innerWidth!=null?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}}});define("elego.lazy",["elego.viewport","elego.event"],function(e,t){"use strict";function n(n,r){if(r=r||"image",d=e.get(),"object"==typeof n){"length"in n||(n=[n]);for(var i=0;i<n.length;i++)if(0!=n[i].offsetWidth){var l={element:n[i],key:s,type:r};f(l)||g.push(l)}return!1===v&&(t.on(window,"scroll,resize",o),v=!0),s++}}function o(){null!=w&&window.clearTimeout(w),w=window.setTimeout(r,p)}function r(){d=e.get();for(var n=g.length;n--;)f(g[n])&&g.splice(n,1);w=null,0==g.length&&(t.off(window,"scroll,resize",o),v=!1)}function i(e){e.src=e.getAttribute(h)}function l(e){y.emit("lazyload",e.id)}function f(e){if(0===e.element.offsetWidth)return!1;var t=e.element.getBoundingClientRect();return t.bottom+m>0&&t.top-m-d.height<0&&(b[e.type](e.element),!0)}function u(e){var t=e.src;e.onerror=function(){this.src=t,e.onerror=null,e.onload=null},e.onload=function(){y.emit("loaded",e),e.onerror=null,e.onload=null},e.src=e.getAttribute(h)}function c(e){for(var t=0;t<g.length;t++)if(g[t].element===e)return void g.splice(t,1)}function a(e){if("object"==typeof e){"length"in e||(e=[e]);for(var t=0;t<e.length;t++)c(e[t]),u(e[t])}}var d,g=[],s=0,h="data-src",m=50,v=!1,w=null,p=20,y={};t.eventable(y);var b={image:u,iframe:i,other:l};return y.add=n,y.loadnow=a,y});define("elego.cookie",function(){function e(e){e=e||{},this.path=e.path||"/",this.domain=e.domain||"",this.expires=e.expires||31536e6,this.secure=e.secure||""}return e.prototype={set:function(e,t){var n=new Date;typeof this.expires=="number"&&n.setTime(n.getTime()+this.expires),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";path="+this.path+(this.domain==""?"":"; domain="+this.domain)+(this.secure?"; secure":"")},get:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""},has:function(e){return this.get(e)===""?!1:!0},remove:function(e){var t=this.expires;this.expires=-31536e6,this.set(e,""),this.expires=t}},e.set=function(t,n,r){(new e(r)).set(t,n)},e.get=function(t,n){return(new e(n)).get(t)},e.remove=function(t,n){(new e(n)).remove(t)},e.has=function(t){return(new e).has(t)},e});define("elego.debug",[],function(){function t(t){e.push(t)}function n(){if(window.console&&window.console.log)for(var t=0;t<e.length;t++)window.console.log(e[t]);else alert(e)}function r(){return e}var e=[];return{get:r,add:t,show:n}});define("elego.browser",function(){var e=window.navigator,t=e.userAgent.toLowerCase(),n=/(msie|webkit|gecko|presto|opera|safari|firefox|chrome|maxthon|android|ipad|iphone|webos|hpwos|trident)[ \/os]*([\d_.]+)/ig,r={platform:e.platform};t.replace(n,function(e,t,n){r[t]||(r[t]=n)}),r.opera&&t.replace(/opera.*version\/([\d.]+)/,function(e,t){r.opera=t}),!r.msie&&r.trident&&t.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/ig,function(e,t){r.msie=t});if(r.msie){r.ie=r.msie;var i=parseInt(r.msie,10);r["ie"+i]=!0}return r.qiho=/\sQIHU\s/i.test(t)?!0:!1,r});define("elego.docport",function(){function e(){var e,t,n,r,i=document.documentElement;return e=i.scrollWidth,t=i.scrollHeight,n=i.clientWidth,r=i.clientHeight,{height:Math.max(t,r),width:Math.max(e,n)}}return{get:e}});define("elego.mask",["elego.docport","elego.browser","other.jquery"],function(e,t){function o(){var t=e.get();n.style.height=t.height+"px",n.style.width=t.width+"px"}function u(){if(n.style.display==="none")return;i!==undefined&&(window.clearTimeout(i),i=undefined),i=window.setTimeout(o,s)}function a(){n=document.createElement("div"),n.className="g-mask",t.ie6&&(n.innerHTML='<iframe frameborder="0"></iframe>',o(),$(window).on("resize",u)),r.body.appendChild(n),a=function(){}}function f(){a(),n.style.display=""}function l(){n&&(n.style.display="none")}var n,r=window.document,i,s=200;return{show:f,hide:l}});define("elego.dialog",["elego.mask","other.jquery","elego.event","elego.browser"],function(e,t,n,r){function s(e,t){if(!e)return this;this._init(e,t)}var i={fixedClass:"g-dialog-fixed",shimHtml:'<iframe frameborder="0" class="g-dialog-shim"></iframe>',shimWrapHtml:'<div class="g-dialog-shimwrap"></div>'};return s.prototype={_init:function(e,n){n=n||{},this._context=e,n.showMask===undefined?this._showMask=!0:this._showMask=n.showMask,n.effect===undefined?this._effect={type:"none"}:this._effect=n.effect,n.shim&&(e.children().wrapAll(i.shimWrapHtml),e.prepend(i.shimHtml)),this._container=n.container||t(window),this._isFixed=n.isFixed||!1,this._isFixed&&this._context.addClass(i.fixedClass),n.name&&this._context.addClass(n.name),this._width=e.width(),this._height=e.height()},_setPosition:function(){var e=(this._container.height()-this._height)/2,n=(this._container.width()-this._width)/2;this._isFixed||(e+=t(window).scrollTop()),this._context.css({left:n}),this._isFixed&&r.ie==6?this._context.css({"margin-top":-this._height/2}):this._context.css({top:e})},show:function(){this._setPosition(),this._showMask&&e.show();switch(this._effect.type){case"fade":this._context.fadeIn();break;default:this._context.show()}this.emit("show")},hide:function(t){t=t||{},this._showMask&&e.hide();switch(this._effect.type){case"fade":this._context.fadeOut();break;default:this._context.hide()}this.emit("hide",t.data)}},n.eventable(s),s});define("elego.json",function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(window.JSON)return window.JSON;var JSON={};typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},JSON});(function(){var e;e=16;var t=0,n=["ms","moz","webkit","o"];for(var r=0;r<n.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[n[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,e-(r-t)),s=window.setTimeout(function(){n(r+i)},i);return t=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})();define("elego.log",function(){function t(t){var n="log_"+(new Date).getTime(),r=window[e][n]=new Image;r.onload=r.onerror=function(){window[e][n]=null,delete window[e][n]},r.src=t}function n(e){var t=["t="+(new Date).getTime()];for(var n in e)e.hasOwnProperty(n)&&e[n]!==undefined&&e[n]!==null&&e[n]!==""&&t.push(window.encodeURIComponent(n)+"="+window.encodeURIComponent(e[n]));return t.join("&")}function r(e,r){r?t(e+"?"+n(r)):t(e)}function i(e,t){if(window.location.protocol==="http:")r(e,t);else{var e="https://p.ssl.so.com/p/"+window.encodeURIComponent(e+"?"+n(t));r(e)}}var e="__lego_log__";return window[e]={},{send:r,httpsSend:i}});define("elego.store",["elego.json"],function(e){function u(){try{return i in n&&n[i]}catch(e){return!1}}var t={},n=typeof window!="undefined"?window:global,r=n.document,i="localStorage",s="script",o;t.disabled=!1,t.version="1.3.20",t.set=function(e,t){},t.get=function(e,t){},t.has=function(e){return t.get(e)!==undefined},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){r==null&&(r=n,n=null),n==null&&(n={});var i=t.get(e,n);r(i),t.set(e,i)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(t){return e.stringify(t)},t.deserialize=function(t){if(typeof t!="string")return undefined;try{return e.parse(t)}catch(n){return t||undefined}};if(u())o=n[i],t.set=function(e,n){return n===undefined?t.remove(e):(o.setItem(e,t.serialize(n)),n)},t.get=function(e,n){var r=t.deserialize(o.getItem(e));return r===undefined?n:r},t.remove=function(e){o.removeItem(e)},t.clear=function(){o.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(e){for(var n=0;n<o.length;n++){var r=o.key(n);e(r,t.get(r))}};else if(r&&r.documentElement.addBehavior){var a,f;try{f=new ActiveXObject("htmlfile"),f.open(),f.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),f.close(),a=f.w.frames[0].document,o=a.createElement("div")}catch(l){o=r.createElement("div"),a=r.body}var c=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o),a.appendChild(o),o.addBehavior("#default#userData"),o.load(i);var r=e.apply(t,n);return a.removeChild(o),r}},h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),p=function(e){return e.replace(/^d/,"___$&").replace(h,"___")};t.set=c(function(e,n,r){return n=p(n),r===undefined?t.remove(n):(e.setAttribute(n,t.serialize(r)),e.save(i),r)}),t.get=c(function(e,n,r){n=p(n);var i=t.deserialize(e.getAttribute(n));return i===undefined?r:i}),t.remove=c(function(e,t){t=p(t),e.removeAttribute(t),e.save(i)}),t.clear=c(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(i)}),t.getAll=function(e){var n={};return t.forEach(function(e,t){n[e]=t}),n},t.forEach=c(function(e,n){var r=e.XMLDocument.documentElement.attributes;for(var i=0,s;s=r[i];++i)n(s.name,t.deserialize(e.getAttribute(s.name)))})}try{var d="__storejs__";t.set(d,d),t.get(d)!=d&&(t.disabled=!0),t.remove(d)}catch(l){t.disabled=!0}return t.enabled=!t.disabled,t});define("eapp.record",["elego.cookie","elego.json"],function(e,t){"use strict";function i(r){var i=e.get(n[r]);return i?t.parse(i):[]}function s(t){e.set(n[t],"",{expires:-3600,domain:".360kan.com"})}function o(e,t){var n=i(e),s=null;for(var o=0;o<n.length;o++)if(n[o].id==t.id){s=n[o];break}s?(s.time=t.time,s.playnum=t.playnum):(n.unshift(t),n.length>r&&n.pop()),u(e,n)}function u(r,i){e.set(n[r],t.stringify(i),{expires:2592e6,domain:".360kan.com"})}function a(e,t){var n=i(e),r=n.length;while(r--)if(n[r].id==t){n.splice(r,1);break}u(e,n)}var n={all:"record2_all"},r=10;return{get:i,add:o,remove:s,removeById:a}});define("eapp.record2",["elego.store","elego.cookie","elego.browser","elego.serverdata"],function(e,t,n,r){"use strict";function o(t){return e.get(i[t])||[]}function u(t){return e.has(i[t])}function a(t){e.set(i[t],[])}function f(t,n){var r=o(t),u=null;for(var a=0;a<r.length;a++)if(r[a].id==n.id){u=r[a];break}u?(u.time=n.time,u.playnum=n.playnum):(r.unshift(n),r.length>s&&r.pop()),e.set(i[t],r)}function l(t,n){e.set(i[t],n)}function c(e,t){var n=o(e),r=n.length;while(r--)if(n[r].id==t){n.splice(r,1);break}l(e,n)}var i={all:"record2_all",tv:"record2_tv"},s=10;return{has:u,set:l,get:o,add:f,remove:a,removeById:c}});define("eapp.recordagent",["eapp.record2","elego.browser","elego.serverdata","eapp.record","elego.json"],function(e,n,t,o,i){function r(n,t){p?e.add(n,t):f.contentWindow.postMessage(JSON.stringify({operate:"add",type:n,item:t}),"*")}function a(n){return new Promise(function(t,o){p?t(e.get(n)):($(window).on("message",function(e){var e=window.event||e.originalEvent;try{e=i.parse(e.data)}catch(n){return n}switch(e.type){case"get":t(e.data)}}),f.contentWindow.postMessage(JSON.stringify({operate:"get",type:n}),"*"))})}function d(n,t){p?e.removeById(n,t):f.contentWindow.postMessage(JSON.stringify({operate:"removebyid",type:n,id:t}),"*")}function s(n){p?e.remove(n):f.contentWindow.postMessage(JSON.stringify({operate:"remove",type:n}),"*")}function c(n){return!p&&("https:"!=window.location.protocol&&void f.contentWindow.postMessage(JSON.stringify({operate:"translate",type:n,data:e.get(n)}),"*"))}var w=n.ie&&n.ie<8,p=w;w&&(e=o);var f=null;return{removeById:d,remove:s,initPromise:function(){if(window.location.host.indexOf("video.360kan.com")>=0||window.location.host.indexOf("so.360kan.com")>=0||window.location.host.indexOf("v.360kan.com")>=0||window.location.host.indexOf("i.360kan.com")>=0)return new Promise(function(e){e(!1)});return f=document.createElement("iframe"),p||(f.style.display="none",f.id="record-frame",f.src="https://www.360kan.com/record/",document.body.appendChild(f)),new Promise(function(e){$(window).on("message",function(n){n=window.event||n.originalEvent;try{n=i.parse(n.data)}catch(n){return n}switch(n.type){case"ready":e(!0),c("tv"),c("all")}})})}(),get:a,add:r}});define("eapp.signup",["other.jquery","elego.cookie","elego.serverdata","elego.event"],function(o,e,n,t){function a(){if(!e.get("tkuc"))return void v.emitOnce(y.nologin,"no cookie");o.ajax({url:b.autoHost+"/login/getuserinfo",data:null,dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?(o.data.home_url=n.get("domain.my")+"/u/index/"+o.data.qid,v.emitOnce(y.login,o.data)):v.emitOnce(y.nologin,o.msg)}})}function c(o,e){if(""==e)o.html(e);else{var n="<b></b>"+e;o.html(n)}}function r(o){return""==o?b.noTel:/^1[3578]\d{9}$/.test(o)?"":b.telError}function s(o){if(""==o)return b.noPwd;for(var e=0;e<o.length;e++){var n=o.charAt(e).charCodeAt();if(n<33||n>126)return b.pwdNoRule}return l(o)}function i(o,e){return o!=e?b.pwdDiffer:""}function l(o){return o.length<6?b.pwdLess:o.length>18?b.pwdMany:""}function u(o){return""==o?b.noCode:""}function d(e,n,t){var c,r;"1"==e.loginType?(c=b.autoHost+"/login/pclogin",r={loginPhone:e.tel,password:e.pwd,keepLogin:e.autoLogin}):(c=b.autoHost+"/login/pcloginbycaptcha",r={loginPhone:e.tel,captcha:e.code,keepLogin:1}),o.ajax({url:c,data:r,dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?n&&(a(),n()):t&&t(o.msg)}})}function p(e,n,t){o.ajax({url:b.autoHost+"/reg/getcaptcha",data:{loginPhone:e.tel,act:e.act,piccaptcha:e.piccaptcha},dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?(e.obj.addClass(e.classname),n&&n(o.data)):t&&t(o)}})}function g(e,n){function t(o){var t=window.setInterval(function(){var a=0;o>0?(a=Math.floor(o),e.strObj.html(a+b.secondClew)):(clearInterval(t),e.strObj.html(b.getCodeClew),e.obj.attr("rel",""),e.obj.removeClass(e.classname),n&&n()),o--},1e3)}e.strObj.html(e.num+b.secondClew);var a=parseInt(e.num-1);o(function(){t(a)})}function h(e,n,t){o.ajax({url:b.autoHost+"/reg/pcregister",data:{loginPhone:e.tel,captcha:e.code,password:e.pwd},dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?n&&(a(),n(o.data)):t&&t(o.msg)}})}function f(e,n,t){o.ajax({url:b.autoHost+"/login/pcretrievepasswd",data:{loginPhone:e.tel,captcha:e.code,password:e.pwd},dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?n&&(a(),n()):t&&t(o.msg)}})}function m(e,n,t){o.ajax({url:b.autoHost+"/reg/savenickname",data:{nickname:e.nickname,crumb:e.crumb},dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?n&&n():t&&t(o.msg)}})}function w(e,n,t){o.ajax({url:b.autoHost+"/reg/checkloginphone",data:{loginPhone:e},dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?n&&n(o.data):t&&t(o.msg)}})}function j(e,n){o.ajax({url:b.autoHost+"/login/pclogout",data:null,dataType:"jsonp",jsonp:"cb",success:function(o){0==o.error?e&&e():n&&n(o.msg)}})}var b={host:n.get("domain.my"),httpshost:n.get("domain.httpsmy"),loginFail:"\u767b\u5f55\u5931\u8d25",networkError:"\u7f51\u7edc\u9519\u8bef\uff0c\u83b7\u53d6\u5931\u8d25",pwdLess:"\u5bc6\u7801\u4e0d\u80fd\u5c11\u4e8e6\u4f4d",pwdMany:"\u5bc6\u7801\u4e0d\u80fd\u591a\u4e8e18\u4f4d",pwdNoRule:"\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u7b26\u5408\u89c4\u8303",noTel:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",telError:"\u8f93\u5165\u624b\u673a\u53f7\u4e0d\u5408\u6cd5",noCode:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",noPwd:"\u8bf7\u8f93\u5165\u5bc6\u7801",pwdDiffer:"\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",protocol:"\u8bf7\u540c\u610f\u6ce8\u518c\u534f\u8bae\u53ca\u7248\u6743\u58f0\u660e",secondClew:"\u79d2\u540e\u53ef\u91cd\u53d1",getCodeClew:"\u83b7\u53d6\u9a8c\u8bc1\u7801"};b.autoHost="http:"===window.location.protocol?b.host:b.httpshost;var v,y={login:"login",nologin:"nologin"};return v={setErrorInfo:c,checkMobile:r,checkPwd:s,comparePwd:i,checkPwdLength:l,checkCode:u,login:d,sendCode:p,changeVcodeClew:g,reg:h,forgetPwd:f,saveUserName:m,checkisRegTel:w,logout:j,updateUserInfo:a},t.eventable(v),a(),v});define("eblock.search2",["eapp.hotquery2","eapp.richquery2","eapp.commonquery","eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event","elego.log","elego.browser","eapp.monitor"],function(e,n,t,o,i,r,a,d,c,l,u){function f(){g.on("submit",function(e){h(e)}),g.on("change",function(e){b.emit("change",e)}),p.on("click",function(e){h(g.get()),e.preventDefault()})}function s(n){w=m(),v="#{host}/index.php?kw=#{kw}&from=#{from}",g=new o("js-eb-suggest"),p=a("#js-eb-search-btn"),h=function(e){var t=r.get("domain.so");if(""==e.q){if(k.is_ad)return w.sendClk(D[0],k.url),void window.open(k.url);e.q=k.title}else if(e.adurl)return w.sendClk(D[e.index]?D[e.index]:"",e.adurl),void window.open(e.adurl);var o="";r.has("from")&&(o=r.get("from"));var a=i(v,{kw:window.encodeURIComponent(e.q),from:o,host:t});"self"==n.target?window.location.href=a:"blank"==n.target&&window.open(a)},(window.location.host.indexOf("video.360kan.com")>=0||window.location.host.indexOf("video.so.com")>=0)&&(h=function(){a("#search-form").get(0).submit()}),f(),e.on("ready",function(e){k=e}),e.on("show",function(e){e.forEach(function(e,n){e.is_ad&&D[n]&&w.sendPv(D[n],e.url)})}),e.init(g),t.init(g)}function m(){function e(e,n){var i=a.extend({},o);i.tm=(new Date).getTime().toString(),i.r=Math.random().toString(),i.adID=e,i.adurl=n,c.send(t.pvUrl,i)}function n(e,n){var i=a.extend({},o);i.tm=(new Date).getTime().toString(),i.r=Math.random().toString(),i.adtype="click",i.adID=e,i.adurl=n,c.send(t.clickUrl,i)}var t={pvUrl:"https://s.360kan.com/360vdo.gif",clickUrl:"https://s.360kan.com/360vdo.gif"},o={platform:"PC",mid:"",uid:u.getGuid(),playSource:"fanqie",cat:0,tm:"",r:"",type:"adsign",adtype:"start"};return function(){if(l.qiho)try{o.mid=external.GetMID(external.GetSID(window))}catch(e){}}(),{sendPv:e,sendClk:n}}var g,p,h,w,v="http://#{host}/index.php?kw=#{kw}&from=#{from}",k=null,D={0:"AD9",1:"AD10",3:"AD11",5:"AD12"},b={init:s};return d.eventable(b),b});define("eapp.hotquery2",["eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,s,a,o){function n(){var e=(new Date).getTime()/6e5+"";e=e.split(".")[0];var t=s.get("domain.kan");a.ajax(t+"/hotlistquery?cb=?",{data:{ver:2,fmt:"jsonp",t:e},crossDomain:!0,success:function(e){if(e&&e[0]){f=e,v.emit("ready",e[0]),v.emit("readyall",e);var t=f[0];""==r.val()&&(r.val(t.title),t.is_ad&&v.emit("show",[t])),r.click(function(){r.addClass(g),r.val()==t.title&&r.val(""),c.request()}),r.blur(function(){r.removeClass(g),""==r.val()&&r.val(t.title)})}},dataType:"jsonp",jsonpCallback:"__jsonp0__",cache:!0})}function l(){c.clear(),a.each(f,function(e,s){c.add(s.title,t(m,{index:e+1,text:s.title,className:e<3?"eb-suggest-index-top3 eb-suggestnew-index-top"+(e+1):"",color:s.is_ad&&s.color?"style='color:"+s.color+"'":"",adIcon:s.is_ad&&s.pic?"<img src='"+s.pic+"' //>":""}),"",null,s.is_ad&&s.url?s.url:"")}),c.show(),c.cache(),v.emit("show",f)}function i(e){c=e,n(),e.on("request",function(t){""===t&&f?(l(e),e.cache(),u.addClass(d)):u.removeClass(d)}),e.on("showlist",function(e){""===e&&f&&v.emit("show",f)}),e.on("change",function(t){""===t?e.addClass(d):e.removeClass(d)}),e.on("emptyclick",function(t){t?e.hide():e.request()})}var c,u=a("#js-eb-suggest"),r=a(".js-query",u),d="eb-suggest-hot",g="eb-suggest-focus",m="<em class='eb-suggest-index #{className}'>#{index}</em><span #{color} class='eb-suggest-hottext'>#{text}#{adIcon}</span>",f=null,v={init:i};return o.eventable(v),v});define("eapp.commonquery",["elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,i){function r(t){n.getJSON(c,{fmt:"jsonp",ac:"richsug",kw:t},function(i){if(0!==i.errno)return void a.hide();if(null===i.data)return a.hide(),void document.emit("richquery.noresult",t);document.emit("richquery.hasresult",t);var r=i.data.suglist;a.clear(),n.each(r,function(n,i){i.showType=s[i.type],i.showWord=i.word.replace(new RegExp(t),"<em>"+t+"</em>"),a.add(i.word,e(d,i,{isEscape:!1}),t,{type:i.type,id:i.info})}),a.show(),a.cache()})}function o(e){a=e,document.emitOnce("richquery.init",a),a.on("itemclick",function(e){var t=n(e.target);t.hasClass("js-item")||(t=t.parents(".js-item"));var i=t.attr("data-adurl"),r={};r.q=e.q,r.index=e.index,i&&(r.adurl=i),a.hide(),document.emit("richquery.itemclick",{q:e.q,index:e.index,target:"blank"}),a.submit(r),a.refreshQuery(r)}),a.on("request",function(e){""!=e&&r(e)})}var a,c=window.location.protocol+"//video.360kan.com/suggest.php?cb=?",s={none:"",dy:"\u7535\u5f71",ds:"\u7535\u89c6\u5267",zy:"\u7efc\u827a",dm:"\u52a8\u6f2b"},d="#{showWord}<span class='eb-suggest-type'>#{showType}</span>",u={init:o};return i.eventable(u),u});define("eapp.richquery2",["eblock.suggest","elego.format","elego.serverdata","other.jquery"],function(e,t,a,i){function s(e,a){e.push(t(m,{content:a},{isEscape:!1}))}function n(e,t){0!=e.upinfo&&(e.upinfo==e.total?s(t,"\u5168 "+e.upinfo+" \u96c6"):s(t,"\u66f4\u65b0\u81f3\u7b2c "+e.upinfo+" \u96c6"))}function r(e,a){var i=[],s="",n=["<div class='eb-suggest-detail'>","<p class='eb-suggest-playbar'>#{playlinkHtml}</p>","</div>"].join("");if(!a.playlink)return s=t('<p class="line2"><a class="eb-suggest-detailbutton" href="#{url}">\u67e5\u770b\u8be6\u60c5</a></p>',{url:a.url,title:a.title});var r=a.playlink;switch(e){case"dy":switch(r.status){case"play":i.push(t('<p class="line2"><a class="eb-suggest-button" href="#{url}">\u7acb\u5373\u64ad\u653e</a></p>',r));break;case"xiankan":i.push(t('<p class="line2"><a class="eb-suggest-xkbutton" href="#{url}">\u8d2d\u4e70\u5728\u7ebf\u7535\u5f71\u7968</a></p>',{url:a.url}))}s=i.join("");break;case"dm":case"ds":for(var c=0;c<r.length;c++)r[c].url?i.push(t("<a class='eb-suggest-detail-item' href='#{url}'>#{name}</a>",r[c])):i.push(t("<span class='eb-suggest-detail-span'>#{name}</span>",r[c]));s='<p class="line3">'+i.join("")+"</p>";break;case"zy":i.push(t('<a class="eb-suggest-detail-itemzy" href="#{url}">#{period} #{name}</a>',r)),s=t(n,i.join(""),{isEscape:!1})}return s}function c(e,t){if(!t)return"";var a=[];switch(e){case"dy":s(a,"\u5bfc\u6f14\uff1a"+t.director.join(" ")),s(a,"\u4e3b\u6f14\uff1a"+o(t.actor)),s(a,"\u7c7b\u578b\uff1a"+o(t.category));break;case"ds":n(t,a),s(a,"\u4e3b\u6f14\uff1a"+o(t.actor)),s(a,"\u5e74\u4ee3\uff1a"+t.year);break;case"dm":n(t,a),s(a,"\u7c7b\u578b\uff1a"+o(t.category)),s(a,"\u5730\u533a\uff1a"+o(t.area));break;case"zy":t.curperiod&&s(a,"\u66f4\u65b0\u81f3\u7b2c "+t.curperiod.replace("\u671f","")+" \u671f"),s(a,"\u4e3b\u6301\u4eba\uff1a"+o(t.director)),s(a,"\u5730\u533a\uff1a"+o(t.area))}return a.join("")}function o(e){var a=[];if(!e)return"";for(var s=0;s<e.length;s++)a.push(t("<b>#{text}</b>",{text:i.trim(e[s])}));return a.join("")}function l(e){i.getJSON(d,{fmt:"jsonp",ac:"richsug",kw:e},function(a){if(0!==a.errno)return void b.hide();if(null===a.data)return b.hide(),void document.emit("richquery.noresult",e);document.emit("richquery.hasresult",e);var s=a.data.suglist,n=a.data.detail,o=!1;b.clear(),i.each(s,function(a,s){s.showType=y[s.type];var l;"none"==s.type||o?l=g:(o=!0,n=n[s.type+"_"+s.info],n?(n.infos=c(s.type,n),s.playlinkHtml=r(s.type,n),n.vipicon=1==n.vip?"<em></em>":"",i.extend(s,n),l=h):l=g),b.add(s.word,t(l,s,{isEscape:!1}),e,{type:s.type,id:s.info})}),b.show(),b.cache()})}function u(e,a,s,n,o){i.getJSON(d,{fmt:"jsonp",type:e,id:a,ac:"detail"},function(a){0===a.errno&&null!==a.data&&(a=a.data,a.word=o,a.showType=y[e],a.infos=c(e,a),a.playlinkHtml=r(e,a),a.vipicon=1==a.vip?"<em></em>":"",n.find("."+f).hide(),b.modify(t(h,a,{isEscape:!1}),s))})}function p(e){b=e,document.emitOnce("richquery.init",b),b.on("itemclick",function(e){if(b.hide(),e.attr&&e.attr.type&&("a"==e.target.tagName.toLowerCase()||"a"==e.target.parentNode.tagName.toLowerCase()))return void document.emit("richquery.itemclick",{q:e.q,index:e.index,target:"blank"});document.emit("richquery.itemclick",{q:e.q,index:e.index,target:"self"}),b.submit({q:e.q}),b.refreshQuery(e.q)}),b.on("request",function(e){""!=e&&l(e)}),b.on("itemselected",function(e){var t=e.attr.type,a=e.attr.id;if(t&&"none"!=t){var i=e.selectedItem.find("."+f);i.length>0?(e.items.find("."+f).hide(),i.show()):u(t,a,e.selectedIndex,e.items,e.q)}})}var d="http://video.360kan.com/suggest.php?cb=?",f="eb-suggest-content",g="#{word}<span class='eb-suggest-type'>#{showType}</span>",h=["#{word}","<span class='eb-suggest-type'>#{showType}</span>","<div class='"+f+" g-clear'>","<a href='#{url}' class='eb-suggest-img'><img src='#{cover}'//>#{vipicon}</a>","<h4 class='g-clear'><span>#{title}</span></h4>","#{infos}","#{playlinkHtml}","</div>"].join(""),m="<p class='line'>#{content}</p>",y={none:"",dy:"\u7535\u5f71",ds:"\u7535\u89c6\u5267",zy:"\u7efc\u827a",dm:"\u52a8\u6f2b"},b=null;return{init:p}});define("eblock.suggest",["other.jquery","elego.event","elego.format","elego.json"],function(t,e,i,s){function n(e,i){i=i||{};var s=this._container=t("#"+e);this._input=t(".js-query",s),this._list=t(".js-list",s),this._wrap=t(".js-wrap",s),this._itemClass="js-item",this._onClass="eb-suggest-on",this._itemTpl=i.itemTpl||"<li class='eb-suggest-item js-item' data-q=#{q} data-attr='#{attr}' data-adurl='#{adurl}'>#{content}</li>",this._delay=i.delay||200,this._handler=null,this._query=t.trim(this._input.val()),this._skipOnce=!1,this._skipBlur=!1,this._selectedIndex=-1,this._cache={},this._init()}return n.prototype={_setItemOn:function(e){var i=this._getItems();if(0===i.length)return!1;var s=i.filter("."+this._onClass),n=s.length?i.index(s):-1;switch(e){case"up":n--,n<-1&&(n=i.length-1),this._input.data().q===undefined&&this._input.data("q",this._input.val());break;case"down":n++,n>=i.length&&(n=-1),this._input.data().q===undefined&&(this._input.data().q=this._input.val())}i.removeClass(this._onClass);var a="";if(-1==n)a=this._input.data("q"),this._input.removeData("q");else{var r=i.eq(n),u=r[0].getAttribute("data-adurl");a=r.addClass(this._onClass).data().q,u?this._input[0].setAttribute("data-adurl",u):this._input[0].setAttribute("data-adurl","")}this._skipOnce=!0,this._input.val(a),this._query=a;var d=this._selectedIndex;return n>=0&&n!==d&&(this._selectedIndex=n,this.emit("itemselected",t.extend({selectedIndex:n,selectedItem:i.eq(n),items:i},i.eq(n).data()))),!0},_init:function(){var e=this;e._input.on("focus",function(){e._handler=window.setInterval(function(){e._request()},e._delay),e._input.parent("span").addClass("eb-suggest-so-border")}),e._input.on("blur",function(){e._request(),e._skipBlur||e.hide(),window.clearInterval(e._handler),e._input.parent("span").hasClass("eb-suggest-so-border")&&e._input.parent("span").removeClass("eb-suggest-so-border")}),e._wrap.on("mouseenter",function(){e._skipBlur=!0}),e._wrap.on("mouseleave",function(){e._skipBlur=!1}),e._list.on("mouseenter","."+e._itemClass,function(i){var s=e._getItems();s.removeClass(e._onClass),t(this).addClass(e._onClass);var n=s.index(this);e._selectedIndex!==n&&(e._selectedIndex=n,e.emit("itemselected",t.extend({selectedIndex:n,selectedItem:s.eq(n),items:s},t(this).data())))}),e._list.on("mouseleave",function(){t(this).removeClass(e._onClass)}),e._list.on("click","."+e._itemClass,function(i){e.emit("itemclick",t.extend({target:i.target,index:e._list.find("."+e._itemClass).index(this)},t(this).data()))}),e._input.on("click",function(){""===t.trim(e._input.val())&&e.emit("emptyclick","none"!=e._wrap.css("display"))}),e._input.on("keydown",function(t){var i=!1;switch(t.keyCode){case 40:e._setItemOn("down")&&e.show(),i=!0;break;case 38:e._setItemOn("up")&&e.show(),i=!0;break;case 27:e.hide();break;case 13:t.preventDefault(),e.emit("enter",{q:e._query,index:e._selectedIndex});var s=e._input[0].getAttribute("data-adurl");e.submit({q:e._query,adurl:s||"",index:e._selectedIndex}),e.hide()}if(i)return!1})},_request:function(){var e=t.trim(this._input.val());if(e!==this._query){if(this._query=e,this._input[0].setAttribute("data-adurl",""),this._skipOnce)return void(this._skipOnce=!1);this._cache[e]!==undefined?this._fill(this._cache[e]):this.emit("request",this._query),this.emit("change",this._query)}},refreshQuery:function(t){this._query=t.q,this._input.val(t.q),t.adurl?this._input[0].setAttribute("data-adurl",t.adurl):this._input[0].setAttribute("data-adurl","")},request:function(){var e=t.trim(this._input.val());this._cache[e]!==undefined?this._fill(this._cache[e],e):this.emit("request",this._query)},submit:function(t){this._input.val(t.q),t.adurl?this._input[0].setAttribute("data-adurl",t.adurl):this._input[0].setAttribute("data-adurl",""),this._query=t.q,this.emit("submit",t)},_fill:function(t){this.clear(),this._list.html(t),""===t?this.hide():(this.show(),this.emit("showlist",this._query))},_getItems:function(){return this._list.find("."+this._itemClass)},clear:function(){this._list.empty()},modify:function(t,e){if(e===undefined)throw new Error("index required!");e==this._selectedIndex&&this._getItems().eq(e).html(t)},add:function(t,e,n,a,r){if(n===undefined)throw new Error("query required!");if(n==this._query){var u={q:t,content:e};a&&(u.attr=s.stringify(a)),r&&(u.adurl=r),this._list.append(i(this._itemTpl,u,{isEscape:!1}))}},cache:function(){this._cache[this._query]=this._list.html()},show:function(){this._wrap.show(),this._input.parent("span").addClass("eb-suggest-so-borderbottom")},hide:function(){this._wrap.hide(),this._input.parent("span").removeClass("eb-suggest-so-borderbottom")},get:function(){var t={},e=this._input.attr("data-adurl");return t.q=this._query,t.index=this._selectedIndex,e&&(t.adurl=e),t},getSelectedIndex:function(){return this._selectedIndex},addClass:function(t){this._container.addClass(t)},removeClass:function(t){this._container.removeClass(t)}},e.eventable(n),n});require(["other.jquery","eapp.monitor","elego.log"],function(n,e,t){function i(n){s.stat="norst",s.kw=s.iw=n,t.send(u,s)}function o(e){s.kw=e.get().q,e.on("enter",function(e){""!=e.q&&(n.extend(s,{kw:e.q,pos:e.index,act:"e",sug:1}),s.sug=s.iw==s.kw?0:1,s.iw||(s.sug=0),t.send(u,s))}),n("#js-eb-search-btn").click(function(){var i=e.get();return""==i.q?null:(n.extend(s,{kw:i.q,pos:e.getSelectedIndex(),act:"b"}),s.sug=s.iw==s.kw?0:1,s.iw||(s.sug=0),t.send(u,s),!1)}),e.on("request",function(n){""!=n&&(s.iw=n)})}var u="https://s.360.cn/yingsi/s.htm",s={site:window.location.host.indexOf("360kan.com")>=0?"360kan":"videoso",guid:e.getGuid(),b:"so_sug",stat:"sug"};document.once("richquery.init",function(n){o(n)}),document.on("richquery.noresult",function(n){i(n)}),document.on("richquery.hasresult",function(){s.stat="sug"}),document.on("richquery.itemclick",function(e){n.extend(s,{kw:e.q,pos:e.index,act:"c",sug:1}),t.send(u,s)})});define("eblock.my",["other.jquery","eapp.signup","elego.serverdata","elego.format"],function(n,o,i,e){function t(n){c.hide(),d.show(),s.find("span").text(n.nickname).end().find("img").attr("src",n.img_url),l.find("ul").html(e(a,{myhost:i.get("domain.my"),qid:n.qid})),l.find(".js-logout").click(function(){return o.logout(function(){window.location.reload()}),!1})}var r=n("#js-ebucenter"),l=n(".js-layer",r),c=n(".js-nologin",r),d=n(".js-login",r),s=n(".js-portrait",r),a=n(".js-tpl",r).html();if(a)return o.once("login",t),c.click(function(){return window.location.href=e("#{host}/login/?destUrl=#{srcUrl}",{host:i.get("domain.my"),srcUrl:window.encodeURIComponent(window.location.href)}),!1}),{}});require(["other.jquery","elego.format","eapp.recordagent","elego.cookie","eapp.monitorvideo","elego.serverdata"],function(e,t,a,s,n,i){function r(a){if(0==a.length)return e("#js-ebrecord-list").html(j),void d.show();m.show();var s={month:(new Date).getMonth(),date:(new Date).getDate()},n={month:new Date(new Date-864e5).getMonth(),date:new Date(new Date-864e5).getDate()},i={month:new Date(new Date-1728e5).getMonth(),date:new Date(new Date-1728e5).getDate()},r='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-title">#{title}</p>#{itemlist}</li>',l='<p class="eb-ucenter-layer-movie g-clear js-ebucenter-movie"><a target="_blank" href="#{url}" class="name">#{name}</a><span class="desc">#{desc}</span><a title="\u5220\u9664" href="javascript:;" id="#{mid}" class="del js-ebucenter-delete"></a></p>';c&&"new"==c&&(l='<p class="eb-ucenter-layer-movie g-clear js-ebucenter-movie"><a target="_blank" href="#{url}" class="name">#{name}</a><span class="desc">#{desc}</span><a title="\u5220\u9664" href="javascript:;" id="#{mid}" class="del js-ebucenter-delete"></a><a title="\u64ad\u653e" href="#{url}" class="play"></a></p>');for(var o=[],u=[],p=[],g=[],v=[],b=0,w=a.length;b<Math.min(w,10);b++){var f=new Date(parseInt(a[b].time)),y=f.getMonth(),D=f.getDate();y==s.month&&D==s.date?o.push(t(l,{url:a[b].url,name:a[b].title,desc:h[a[b].type],mid:a[b].id},{isEscape:!1})):y==n.month&&D==n.date?u.push(t(l,{url:a[b].url,name:a[b].title,desc:h[a[b].type],mid:a[b].id},{isEscape:!1})):y==i.month&&D==i.date?p.push(t(l,{url:a[b].url,name:a[b].title,desc:h[a[b].type],mid:a[b].id},{isEscape:!1})):g.push(t(l,{url:a[b].url,name:a[b].title,desc:h[a[b].type],mid:a[b].id},{isEscape:!1}))}o.length>0&&v.push(t(r,{title:"\u4eca\u5929",itemlist:o.join("")},{isEscape:!1})),u.length>0&&v.push(t(r,{title:"\u6628\u5929",itemlist:u.join("")},{isEscape:!1})),p.length>0&&v.push(t(r,{title:"\u524d\u5929",itemlist:p.join("")},{isEscape:!1})),g.length>0&&v.push(t(r,{title:"\u66f4\u65e9",itemlist:g.join("")},{isEscape:!1})),e("#js-ebrecord-list").html(v.join("")),d.show()}function l(e){var t=i.get("tongji")&&i.get("tongji").kan?i.get("tongji").kan.u:i.get("tongji");t||(t="http://www.360kan.com/index/");var a={u:t,track:"shortpv",sc:"a",areacode:s.get("loc_code")};n.sendKan(e[0],a)}var o=e("#js-ebucenter"),c=o.data("type"),u=e("#js-ebrecord"),d=e("#js-ebrecord-layer"),m=e(".js-delall",d),h={tv:"\u7535\u89c6\u5267",movie:"\u7535\u5f71",comics:"\u52a8\u6f2b",arts:"\u7efc\u827a"},p=null,j='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-title">\u65e0\u89c2\u770b\u8bb0\u5f55</p></li>';c&&"new"==c&&(j='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-movie">\u60a8\u6682\u65f6\u8fd8\u6ca1\u6709\u89c2\u770b\u8bb0\u5f55\u54df\uff0c\u5feb\u53bb\u901b\u901b\u5427\uff5e</p></li>'),m.on("click",function(){a.remove("all"),m.hide(),e("#js-ebrecord-list").html(j)}),e("#js-ebrecord-list").on("mouseenter",".js-ebucenter-movie",function(){e(this).addClass("hover")}),e("#js-ebrecord-list").on("mouseleave",".js-ebucenter-movie",function(){e(this).removeClass("hover")}),e("#js-ebrecord-list").on("click",".js-ebucenter-delete",function(){var t=e(this).attr("id");return e(this.parentNode).hide(),a.removeById("all",t),0==e(".js-ebucenter-movie").length&&d.hide(),!1}),e("#js-ebrecord-wrap").on("mouseenter",function(){a.get("all").then(r)}),e("#js-ebrecord-wrap").on("mouseleave",function(){p&&clearTimeout(p),d.hide(),m.hide()}),u.click(function(){return!1});var g=e("#js-ebapp"),v=e(".js-ebapp-layer",g);g.on("mouseenter",function(){p=setTimeout(function(){v.show(),l(v)},300)}),g.on("mouseleave",function(){p&&clearTimeout(p),v.hide()})});require(["other.jquery"],function(e){e(document).on("click",".js-addfavorite",function(){try{window.external.AddFavorite("http://www.360kan.com","360\u5f71\u89c6_\u4e00\u7f51\u6253\u5c3d\u6240\u6709\u4e3b\u6d41\u89c6\u9891\u7f51\u7ad9\u7684\u5f71\u89c6\u5267")}catch(e){alert("\u8bf7\u4f7f\u7528\u6309\u952e Ctrl+d\uff0c\u6536\u85cf360\u5f71\u89c6_\u4e00\u7f51\u6253\u5c3d\u6240\u6709\u4e3b\u6d41\u89c6\u9891\u7f51\u7ad9\u7684\u5f71\u89c6\u5267")}return!1})});define("eblock.feedback",["other.jquery","elego.json","elego.dialog","elego.md5","elego.browser"],function(e,t,a,i,n){function s(e){var t=new i;return t.append(e),t.end()}var r=e("#js-eb-feedback2"),d=r.find(".js-eb-feedbackform"),f=r.find(".eb-feedback-tag li"),c=!!n.ie,o={effect:"fade",shim:c,isFixed:!0},l=function(){this._init(r,o),u.call(this)};d.attr("action",window.location.protocol+"//care.help.360.cn/care/upload"),l.prototype=new a,l.prototype.initFeedbackFrm=function(){d.get(0).reset(),r.find(".js-feedback-success").hide(),d.show(),r.find("textarea, input.number").removeClass("focus");var e=f.first().attr("data-text-default");f.removeClass("on").first().addClass("on"),r.find("textarea").val(e).attr("data-text-default",e)};var u=function(){var t=this;r.find(".js-close").click(function(){return t.hide(),!1}),r.find(".eb-feedback-tag li").click(function(){var t=e(this).attr("data-text-default"),a=r.find("textarea");return e(this).addClass("on").siblings("li").removeClass("on"),a.hasClass("focus")||a.val(t).attr("data-text-default",t).removeClass("focus"),!1}),r.find("textarea, input.number").focus(function(){var t=e(this).addClass("focus").attr("data-text-default");r.find(".js-feedback-hit").hide(),this.value==t&&(this.value="")}).blur(function(){if(""==this.value.replace(/ /gi,"")){var t=e(this).removeClass("focus").attr("data-text-default");this.value=t}}),r.find(".js-submit-btn").click(function(){var t=r.find(".js-message"),a=e.trim(t.val());if(-1!==e.inArray(a,["",t.attr("data-text-default")]))return r.find(".js-feedback-hit").show(),!1;var i=["",d.find(".on .m").html(),a].join("");r.find(".js-message-real").val(i);var n=i;e("#js-content").val(n),e("#js-sys").val(window.navigator.userAgent),e("#js-verify").val(s(e("#js-project").val()+n+"360clientfeedback"));var f=e("#contact").val();return"QQ/\u90ae\u7bb1/\u7535\u8bdd"===f&&(f=""),e("#js-contact").val(f),d.submit(),d.hide(),r.find(".js-feedback-success").show(),!1}),r.find(".js-feedback-again").click(function(){t.initFeedbackFrm()})};return l});require(["other.jquery","eblock.feedback"],function(t,i){function n(i){var n;o&&window.clearTimeout(o),t(window).scrollTop()<400?(o=window.setTimeout(function(){s.hide(),o=null},500),n=!0):(o=window.setTimeout(function(){s.show(),o=null},500),n=!1),i&&i.first?setTimeout(function(){document.emit("hideGotopBtn",n)},300):document.emit("hideGotopBtn",n)}var o,e=t("#js-eb-sidefeedback2"),c=t(".js-feedback",e),u=t(".js-ad",e),l=u.find("a"),r=t(".js-repeat",e),s=t(".js-gotop",e),d="";document.on("showbottomad",function(t){t.img||(t.img="https://p4.ssl.qhimg.com/t01b16ab1e05b4be0cc.png"),u.css({visibility:"visible"}).find("img").attr("src",t.img),l.attr("href",t.url),d="bottomad"}),document.on("showrightbottomad",function(t){u.css({visibility:"visible"}).find("img").attr("src",t.img),l.attr("href",t.url),d="rightbottomad"}),l.click(function(){""!==d&&document.emit("record"+d,null)}),r.click(function(){""!==d&&document.emit("play"+d,null)});var m=null;!function(){var o=null;t(window).on("scroll",function(){m&&window.clearTimeout(m),m=window.setTimeout(function(){n(),m=null},300)}),c.click(function(t){t.preventDefault(),o||(o=new i),o.initFeedbackFrm(),o.show()}),c.one("mouseenter",function(){o=new i}),s.click(function(){return t(window).scrollTop(0),!1}),n({first:!0})}()});require(["elego.browser","other.jquery"],function(e,t){"use strict";if(!e.ie||e.ie>=9)return;var n="js-playicon",r="g-playicon-mask",i="g-playicon-icon";t(document).on("mouseenter","."+n,function(){t("."+r,this).length==0&&t(this).removeClass(n).append("<span class='g-playicon-mask'></span><span class='g-playicon-icon'></span>")})});require(["elego.cookie","eapp.monitorvideo","elego.serverdata"],function(n,o,e){function i(o,e){n.has(l)||"Notification"in window&&(w=new Notification(o,e),a(),n.set(l,g,{expires:h}),r())}function t(){return new Promise(function(n){$.ajax({url:"https://www.360kan.com/special/webPush.json",data:{},dataType:"jsonp",jsonpCallback:"pc360",success:function(o){n(o)},error:function(){}})})}function c(){return new Promise(function(n){Notification.requestPermission(function(o){"granted"===o?(n(!0),u({isAllowed:!0})):"denied"===o?(n(!1),u({isAllowed:!1})):n(null)})})}function a(){w.onclick=function(n){n.preventDefault(),window.open(s,"_blank"),d(),w.close()}}function r(){var e={u:k,track:"shortpv",sc:"a",areacode:n.get("loc_code"),cId:"\u7cfb\u7edf\u5f39\u7a97"};o.sendKan(window.document.body,e)}function d(){var e={u:k,track:"clk",sc:"a",areacode:n.get("loc_code"),f:s,c:f,cId:"\u7cfb\u7edf\u5f39\u7a97"};o.sendKan(window.document.body,e)}function u(n){var e={u:k,track:"notificationAuthorize",f:window.location.href,isAllowed:!0},i=$.extend({},e,n);o.sendKan(window.document.body,i)}var s,f,w,l="noticefrequency__key",g=1,p=9e4,h=864e5,k=e.get("tongji")&&e.get("tongji").kan?e.get("tongji").kan.u:e.get("tongji");k||(k="http://www.360kan.com/index/"),function(){"Notification"in window&&"denied"!==Notification.permission&&(n.has(l)||t().then(function(n){if(n&&n.length){var o=n.length,e=Math.floor(Math.random()*o);f=n[e].title,s=n[e].url;var t={body:n[e].alias,icon:n[e].cover};window.setTimeout(function(){"granted"===Notification.permission?i(f,t):c().then(function(n){!0===n&&i(f,t)})},p)}}))}()});